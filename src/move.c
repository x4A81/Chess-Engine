#include "../include/move.h"

#include <stdio.h>
#include <inttypes.h>

uint64_t pawn_move_table[64][2] = { { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x3, 0x1030000 }, { 0x7, 0x2070000 }, { 0xe, 0x40e0000 }, { 0x1c, 0x81c0000 }, { 0x38, 0x10380000 }, { 0x70, 0x20700000 }, { 0xe0, 0x40e00000 }, { 0xc0, 0x80c00000 }, { 0x300, 0x3000000 }, { 0x700, 0x7000000 }, { 0xe00, 0xe000000 }, { 0x1c00, 0x1c000000 }, { 0x3800, 0x38000000 }, { 0x7000, 0x70000000 }, { 0xe000, 0xe0000000 }, { 0xc000, 0xc0000000 }, { 0x30000, 0x300000000 }, { 0x70000, 0x700000000 }, { 0xe0000, 0xe00000000 }, { 0x1c0000, 0x1c00000000 }, { 0x380000, 0x3800000000 }, { 0x700000, 0x7000000000 }, { 0xe00000, 0xe000000000 }, { 0xc00000, 0xc000000000 }, { 0x3000000, 0x30000000000 }, { 0x7000000, 0x70000000000 }, { 0xe000000, 0xe0000000000 }, { 0x1c000000, 0x1c0000000000 }, { 0x38000000, 0x380000000000 }, { 0x70000000, 0x700000000000 }, { 0xe0000000, 0xe00000000000 }, { 0xc0000000, 0xc00000000000 }, { 0x300000000, 0x3000000000000 }, { 0x700000000, 0x7000000000000 }, { 0xe00000000, 0xe000000000000 }, { 0x1c00000000, 0x1c000000000000 }, { 0x3800000000, 0x38000000000000 }, { 0x7000000000, 0x70000000000000 }, { 0xe000000000, 0xe0000000000000 }, { 0xc000000000, 0xc0000000000000 }, { 0x30100000000, 0x300000000000000 }, { 0x70200000000, 0x700000000000000 }, { 0xe0400000000, 0xe00000000000000 }, { 0x1c0800000000, 0x1c00000000000000 }, { 0x381000000000, 0x3800000000000000 }, { 0x702000000000, 0x7000000000000000 }, { 0xe04000000000, 0xe000000000000000 }, { 0xc08000000000, 0xc000000000000000 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 }, { 0x0, 0x0 } };

void generate_pawn_move_table() {
    uint64_t bb;
    printf("{ ");
    for (int sq = 0; sq < 64; sq++) {
        if (sq < 8 || sq >= 56) {
            printf("{ 0x0, 0x0 }, ");
            continue;
        }


        bb = (1ULL << sq);

        // Black Pawns

        // Single Push
        pawn_move_table[sq][0] = bb >> 8;

        // Captures
        pawn_move_table[sq][0] |= ((pawn_move_table[sq][0] << 1) & 0xfefefefefefefefe) |
                                 ((pawn_move_table[sq][0] >> 1) & 0x7f7f7f7f7f7f7f7f);

        // Dbl
        if (sq <= 55 && sq >= 48)
            pawn_move_table[sq][0] |= bb >> 16;

        // White Pawns

        // Single Push
        pawn_move_table[sq][1] = bb << 8;

        // Captures
        pawn_move_table[sq][1] |= ((pawn_move_table[sq][1] << 1) & 0xfefefefefefefefe) |
                                  ((pawn_move_table[sq][1] >> 1) & 0x7f7f7f7f7f7f7f7f);

        // Dbl
        if (sq >= 8 && sq <= 15)
            pawn_move_table[sq][1] |= bb << 16;

        printf("{ 0x%" PRIx64 ", 0x%" PRIx64 " }, ", pawn_move_table[sq][0], pawn_move_table[sq][1]);
    }

    printf("};");
}

uint64_t knight_move_table[64] = { 0x20400, 0x50800, 0xa1100, 0x142200, 0x284400, 0x508800, 0xa01000, 0x402000, 0x2040004, 0x5080008, 0xa110011, 0x14220022, 0x28440044, 0x50880088, 0xa0100010, 0x40200020, 0x204000402, 0x508000805, 0xa1100110a, 0x1422002214, 0x2844004428, 0x5088008850, 0xa0100010a0, 0x4020002040, 0x20400040200, 0x50800080500, 0xa1100110a00, 0x142200221400, 0x284400442800, 0x508800885000, 0xa0100010a000, 0x402000204000, 0x2040004020000, 0x5080008050000, 0xa1100110a0000, 0x14220022140000, 0x28440044280000, 0x50880088500000, 0xa0100010a00000, 0x40200020400000, 0x204000402000000, 0x508000805000000, 0xa1100110a000000, 0x1422002214000000, 0x2844004428000000, 0x5088008850000000, 0xa0100010a0000000, 0x4020002040000000, 0x400040200000000, 0x800080500000000, 0x1100110a00000000, 0x2200221400000000, 0x4400442800000000, 0x8800885000000000, 0x100010a000000000, 0x2000204000000000, 0x4020000000000, 0x8050000000000, 0x110a0000000000, 0x22140000000000, 0x44280000000000, 0x88500000000000, 0x10a00000000000, 0x20400000000000 };

void generate_knight_move_table() {
    uint64_t l1, l2, r1, r2, h1, h2, bb;
    printf("{ ");
    for (int sq = 0; sq < 64; sq++) {
        bb = (1ULL << sq);
        l1 = (bb >> 1) & 0x7f7f7f7f7f7f7f7f;
        l2 = (bb >> 2) & 0x3f3f3f3f3f3f3f3f;
        r1 = (bb << 1) & 0xfefefefefefefefe;
        r2 = (bb << 2) & 0xfcfcfcfcfcfcfcfc;
        h1 = l1 | r1;
        h2 = l2 | r2;
        knight_move_table[sq] = (h1 << 16) | (h1 >> 16) | (h2 << 8) | (h2 >> 8);
        printf("0x%" PRIx64 ", ", knight_move_table[sq]);
    }

    printf("};");
}

uint64_t king_move_table[64] = { 0x302, 0x705, 0xe0a, 0x1c14, 0x3828, 0x7050, 0xe0a0, 0xc040, 0x30203, 0x70507, 0xe0a0e, 0x1c141c, 0x382838, 0x705070, 0xe0a0e0, 0xc040c0, 0x3020300, 0x7050700, 0xe0a0e00, 0x1c141c00, 0x38283800, 0x70507000, 0xe0a0e000, 0xc040c000, 0x302030000, 0x705070000, 0xe0a0e0000, 0x1c141c0000, 0x3828380000, 0x7050700000, 0xe0a0e00000, 0xc040c00000, 0x30203000000, 0x70507000000, 0xe0a0e000000, 0x1c141c000000, 0x382838000000, 0x705070000000, 0xe0a0e0000000, 0xc040c0000000, 0x3020300000000, 0x7050700000000, 0xe0a0e00000000, 0x1c141c00000000, 0x38283800000000, 0x70507000000000, 0xe0a0e000000000, 0xc040c000000000, 0x302030000000000, 0x705070000000000, 0xe0a0e0000000000, 0x1c141c0000000000, 0x3828380000000000, 0x7050700000000000, 0xe0a0e00000000000, 0xc040c00000000000, 0x203000000000000, 0x507000000000000, 0xa0e000000000000, 0x141c000000000000, 0x2838000000000000, 0x5070000000000000, 0xa0e0000000000000, 0x40c0000000000000 };

void generate_king_move_table() {
    uint64_t bb;
    printf("{ ");
    for (int sq = 0; sq < 64; sq++) {
        bb = (1ULL << sq);
        king_move_table[sq] = ((bb >> 1) & 0x7f7f7f7f7f7f7f7f) | ((bb << 1) & 0xfefefefefefefefe);
        bb |= king_move_table[sq];
        king_move_table[sq] |= (bb << 8) | (bb >> 8);
        printf("0x%" PRIx64 ", ", king_move_table[sq]);
    }

    printf("};");
}